{% extends 'base.html' %}
{% load bootstrap3 %}
{% load static %}

{% block bootstrap3_title %}Live | ITLab SSL{% endblock %}

{% block head %}
{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
      <div algin="center" class="embed-responsive embed-responsive-16by9">
        <video id=video class="embed-responsive-item" controls muted autoplay></video>
      </div>
      <!-- <div algin="center" class="embed-responsive-16by9">
        <video id=video class="video-js vjs-default-skin vjs-big-play-centered" data-setup='{"fluid": true}' controls muted autoplay></video>
      </div> -->
  </div>
</div>
{% endblock %}

{% block extra_script %}
<!-- <script src="https://cdn.jsdelivr.net/npm/mediaelement@latest/build/mediaelement-and-player.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mediaelement@latest/build/mediaelementplayer.min.css" />
<script>
  var player = new MediaElementPlayer('video', {
    alwaysShowControls: true,
    stretching: 'responsive',
    startVolume: 0.0,
    forceLive: true
  });
  player.setSrc('https://ssl.itlab.ee.ncku.edu.tw:62400/hls/demo.m3u8');
  player.media.load();
  player.play();
</script> -->

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/video.js@latest/dist/video-js.min.css" />
<script src="https://cdn.jsdelivr.net/npm/video.js@latest/dist/video.min.js"></script>
<script>
  var player = videojs('video', {
      html5: {
        hls: {
          overrideNative: true
        },
        nativeAudioTracks: false,
        nativeVideoTracks: false,
      }
  });
  player.src("https://ssl.itlab.ee.ncku.edu.tw:62400/hls/demo.m3u8");
</script> -->

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  var video = document.getElementById('video');
  if(Hls.isSupported()) {
    var hls = new Hls();
    hls.loadSource('https://ssl.itlab.ee.ncku.edu.tw:62400/hls/demo.m3u8');
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,function() {
      video.play();
  });
 }
  else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = 'https://ssl.itlab.ee.ncku.edu.tw:62400/hls/demo.m3u8';
    video.addEventListener('loadedmetadata',function() {
      video.play();
    });
  }
</script>

{% endblock %}
