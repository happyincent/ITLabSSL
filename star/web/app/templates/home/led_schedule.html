{% extends 'base.html' %}
{% load bootstrap3 %}
{% load static %}

{% block bootstrap3_title %}LED Schedule | ITLab SSL{% endblock %}

{% block head %}
<link rel="stylesheet" href="/static/home/plugin/jquery-ui-1.12.1.css" />
<link rel="stylesheet" href="/static/home/plugin/jquery.schedule.min-2.2.0.css" />
<style>
  .jqs {
    /* min-width: 600px; */
    width: 100%;
    background: #fff;
    border: 1px solid #ddd;
  }

  .testimonial-group>.row {
    overflow-x: auto;
    white-space: nowrap;
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <div class="row clearfix">
    <div class="col-md-12 column">
      <ul class="breadcrumb">
        <li>
          <a href="{% url 'home' %}">Home</a>
        </li>
        <li>
          <a href="{% url 'device_list' %}">Device List</a>
        </li>
        <li>
          {% if request.user.is_superuser or request.user.username == device.user.username %}
          <a href="{% url 'device_update' pk=device_id %}">Edit Device <small>({{ device_id }})</small></a>
          {% else %}
          Edit Device <small>({{ device_id }})</small>
          {% endif %}
        </li>
        <li class="active">
          LED Schedule
        </li>
      </ul>
      <div class="page-header">
        <h3>{{ device_id }}</h3>
      </div>

      <div class="btn-group mb-3">
        <button type="button" class="btn btn-success" id="export">Save</button>
        <button type="button" class="btn btn-primary" id="import">Restore</button>
        <button type="button" class="btn btn-warning" id="reset">Clear</button>
      </div>
      <a href="{{request.META.HTTP_REFERER|escape}}" class="btn btn-default">Back</a>
      <p></p>
      <div class="testimonial-group">
        <div class="row">
          <div id="schedule" class="jqs"></div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_script %}
<script src="/static/home/plugin/jquery-ui.min-1.12.1.js"></script>
<script src="/static/home/plugin/jquery.schedule-2.2.0.ddl.js"></script>
<script>
  var device = $.parseJSON('{{ device|escapejs }}')[0];
  var last_schedule = device.fields['led_schedule'];

  $('#schedule').jqs();

  $('#reset').click(function () {
    $('#schedule').jqs('reset');
  });

  $('#import').click(function () {
    $('#schedule').jqs('import', last_schedule);
  });
</script>
{% endblock %}